# üß† RAG-–ø–∞–º—è—Ç—å

RAG (Retrieval-Augmented Generation) –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É –ø–æ–º–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –æ—Ç–≤–µ—Ç–∞—Ö.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ Puppeteer v1.0.0

–°–∏—Å—Ç–µ–º–∞ RAG-–ø–∞–º—è—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞:

- **Ollama Embeddings**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ `/api/embeddings`
- **SQLite Vector Storage**: –•—Ä–∞–Ω–µ–Ω–∏–µ embeddings –≤ BLOB —Ñ–æ—Ä–º–∞—Ç–µ
- **Cosine Similarity Search**: –ü–æ–∏—Å–∫ —Ç–æ–ø-3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –í—Å–µ –∑–Ω–∞—á–∏–º—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (>10 —Å–∏–º–≤–æ–ª–æ–≤)
- **–ò–Ω—ä–µ–∫—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**: `[–í–°–ü–õ–´–í–®–ò–ï –í–û–°–ü–û–ú–ò–ù–ê–ù–ò–Ø –û –ü–†–û–®–õ–´–• –î–ò–ê–õ–û–ì–ê–•]`
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞**: –•—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 1000 –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π –Ω–∞ —á–∞—Ç

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°–æ–æ–±—â–µ–Ω–∏–µ  ‚îÇ ‚îÄ‚îÄ‚ñ∂ ‚îÇ  Embedding  ‚îÇ ‚îÄ‚îÄ‚ñ∂ ‚îÇ  –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                               ‚îÇ
                                               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –û—Ç–≤–µ—Ç     ‚îÇ ‚óÄ‚îÄ‚îÄ ‚îÇ     LLM     ‚îÇ ‚óÄ‚îÄ‚îÄ ‚îÇ    –ü–æ–∏—Å–∫    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –≤–µ–∫—Ç–æ—Ä (embedding) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
2. **–ü–æ–∏—Å–∫**: –ü—Ä–∏ –Ω–æ–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏—â—É—Ç—Å—è –ø–æ—Ö–æ–∂–∏–µ –ø–æ —Å–º—ã—Å–ª—É –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: –ù–∞–π–¥–µ–Ω–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM
4. **–û—Ç–≤–µ—Ç**: LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —Å —É—á—ë—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## Time-Decay

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.**

–°–≤–µ–∂–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –≤–∞–∂–Ω–µ–µ —Å—Ç–∞—Ä—ã—Ö:

```
score = similarity √ó e^(-decay √ó hours/24) √ó importance
```

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (v1.0.0) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ cosine similarity –±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞—Ç—É—Ö–∞–Ω–∏—è.

## –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.**

–ö–æ–≥–¥–∞ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π, —Å—Ç–∞—Ä—ã–µ –¥–∏–∞–ª–æ–≥–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∂–∏–º–∞—Ç—å—Å—è –≤ –∫—Ä–∞—Ç–∫–∏–µ —Å–∞–º–º–∞—Ä–∏:

```
[100 —Å–æ–æ–±—â–µ–Ω–∏–π] ‚îÄ‚îÄ‚ñ∂ [–°–∞–º–º–∞—Ä–∏: "–û–±—Å—É–∂–¥–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç X, —Ä–µ—à–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Rust..."]
```

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (v1.0.0) –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è (>1000 –Ω–∞ —á–∞—Ç).

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (v1.0.0)

RAG-–ø–∞–º—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ú–æ–¥–µ–ª—å: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `OLLAMA_MODEL` –∏–∑ `.env`
- –•—Ä–∞–Ω–∏–ª–∏—â–µ: `long_term_memory` —Ç–∞–±–ª–∏—Ü–∞ –≤ SQLite
- –õ–∏–º–∏—Ç –ø–æ–∏—Å–∫–∞: 100 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏: similarity > 0.5
- –û—á–∏—Å—Ç–∫–∞: –ö–∞–∂–¥–æ–µ 100-–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (1% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å)

### –ë—É–¥—É—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

```
/enable_rag
/disable_rag
```

### –ß–µ—Ä–µ–∑ Mini App

Settings ‚Üí RAG Memory ‚Üí Toggle

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
# –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞—Ç—É—Ö–∞–Ω–∏—è (0.0 = –Ω–µ –∑–∞—Ç—É—Ö–∞–µ—Ç, 1.0 = –±—ã—Å—Ç—Ä–æ)
RAG_DECAY_RATE=0.1

# –ü–æ—Ä–æ–≥ –¥–ª—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π)
SUMMARY_THRESHOLD=50
```

## –ß—Ç–æ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è

- ‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–µ–±-–ø–æ–∏—Å–∫–∞
- ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ùå –ö–æ–º–∞–Ω–¥—ã

## –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

- –ü–∞–º—è—Ç—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ SQLite
- –ö–∞–∂–¥—ã–π —á–∞—Ç –∏–º–µ–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–º—è—Ç—å
- –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç—Ä–µ—Ç—å–∏–º —Å—Ç–æ—Ä–æ–Ω–∞–º
- –ú–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ø–∞–º—è—Ç—å —á–µ—Ä–µ–∑ Mini App

---

‚û°Ô∏è –î–∞–ª–µ–µ: [[Mini-App|–í–µ–±-–ø–∞–Ω–µ–ª—å]]
