# ⚙️ Конфигурация

Все настройки задаются через файл `.env` в корне проекта.

## Минимальная конфигурация

```env
TELOXIDE_TOKEN=your_bot_token_here
OWNER_ID=your_telegram_id
DATABASE_URL=sqlite:persona_forge.db
```

## Полная конфигурация

```env
# ═══════════════════════════════════════════════════════════════
# TELEGRAM
# ═══════════════════════════════════════════════════════════════
TELOXIDE_TOKEN=your_bot_token        # Токен от @BotFather
OWNER_ID=123456789                   # Твой Telegram ID
BOT_NAME=PersonaForge                # Имя бота (опционально)

# ═══════════════════════════════════════════════════════════════
# DATABASE
# ═══════════════════════════════════════════════════════════════
DATABASE_URL=sqlite:persona_forge.db # Путь к SQLite базе

# ═══════════════════════════════════════════════════════════════
# OLLAMA
# ═══════════════════════════════════════════════════════════════
OLLAMA_URL=http://localhost:11434    # URL Ollama сервера
OLLAMA_CHAT_MODEL=llama3.2           # Модель для чата
OLLAMA_EMBEDDING_MODEL=nomic-embed-text  # Модель для эмбеддингов
OLLAMA_VISION_MODEL=llava            # Модель для vision

# ═══════════════════════════════════════════════════════════════
# GENERATION
# ═══════════════════════════════════════════════════════════════
TEMPERATURE=0.7                      # Температура (0.0-2.0)
MAX_TOKENS=2048                      # Макс. токенов в ответе
LLM_TIMEOUT_SECONDS=120              # Таймаут LLM запроса

# ═══════════════════════════════════════════════════════════════
# FEATURES
# ═══════════════════════════════════════════════════════════════
VISION_ENABLED=true                  # Анализ изображений
VOICE_ENABLED=true                   # Голосовые сообщения
WEB_SEARCH_ENABLED=true              # Веб-поиск

# ═══════════════════════════════════════════════════════════════
# WHISPER (для голоса)
# ═══════════════════════════════════════════════════════════════
WHISPER_URL=http://localhost:8080/inference

# ═══════════════════════════════════════════════════════════════
# RAG
# ═══════════════════════════════════════════════════════════════
RAG_DECAY_RATE=0.1                   # Скорость затухания памяти
SUMMARY_THRESHOLD=50                 # Порог для суммаризации

# ═══════════════════════════════════════════════════════════════
# QUEUE
# ═══════════════════════════════════════════════════════════════
MAX_CONCURRENT_LLM_REQUESTS=3        # Макс. параллельных запросов
QUEUE_TIMEOUT_SECONDS=30             # Таймаут очереди

# ═══════════════════════════════════════════════════════════════
# BEHAVIOR
# ═══════════════════════════════════════════════════════════════
RANDOM_REPLY_PROBABILITY=0.0         # Вероятность случайного ответа (0.0-1.0)

# ═══════════════════════════════════════════════════════════════
# WEBAPP
# ═══════════════════════════════════════════════════════════════
WEBAPP_PORT=8080                     # Порт веб-панели
```

## Описание параметров

### Telegram

| Параметр | Обязательный | Описание |
|----------|--------------|----------|
| `TELOXIDE_TOKEN` | ✅ | Токен бота от @BotFather |
| `OWNER_ID` | ✅ | Твой Telegram ID для админ-доступа |
| `BOT_NAME` | ❌ | Имя бота (берётся из Telegram если не указано) |

### Ollama

| Параметр | По умолчанию | Описание |
|----------|--------------|----------|
| `OLLAMA_URL` | `http://localhost:11434` | URL Ollama API |
| `OLLAMA_CHAT_MODEL` | `llama3.2` | Модель для генерации ответов |
| `OLLAMA_EMBEDDING_MODEL` | `nomic-embed-text` | Модель для RAG эмбеддингов |
| `OLLAMA_VISION_MODEL` | `llava` | Модель для анализа изображений |

### Генерация

| Параметр | По умолчанию | Описание |
|----------|--------------|----------|
| `TEMPERATURE` | `0.7` | Креативность (0.0 = детерминированно, 2.0 = хаос) |
| `MAX_TOKENS` | `2048` | Максимальная длина ответа |
| `LLM_TIMEOUT_SECONDS` | `120` | Таймаут запроса к LLM |

### Поведение

| Параметр | По умолчанию | Описание |
|----------|--------------|----------|
| `RANDOM_REPLY_PROBABILITY` | `0.0` | Вероятность ответа на случайное сообщение в группе |

- `0.0` — отвечает только на триггеры, упоминания, реплаи
- `0.3` — 30% шанс ответить на любое сообщение
- `1.0` — отвечает на всё

---

➡️ Далее: [[Quick-Start|Быстрый старт]]
